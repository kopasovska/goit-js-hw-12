{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst myApiKey = '48965067-3962fe69a0505f7cd9cc5ea86';\n\nconst axiosInstance = axios.create({\n  baseURL: 'https://pixabay.com/api',\n  params: {\n    key: myApiKey,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safeSearch: true,\n    per_page: 40,\n  },\n});\n\nexport async function getImages(searchQuery, page) {\n  const params = {\n    q: encodeURIComponent(searchQuery),\n    page: page,\n  };\n\n  const response = await axiosInstance.get('', { params });\n\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: 'true',\n});\n\nfunction galleryMarkup(images) {\n  const markup = images\n    .map(\n      image => `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${image.webformatURL}\">\n                  <img\n                    class=\"gallery-image\"\n                    src=\"${image.webformatURL}\"\n                    alt=\"${image.tags\n                      .split(', ')\n                      .filter(\n                        (value, index, self) => self.indexOf(value) === index\n                      )\n                      .join(', ')}\"\n                  />\n                  <ul class=\"image-info-list\">\n                    <li class=image-info-item>\n                        <p class=\"info-title info-text\">Likes</p>\n                        <p class=\"info-text\">${image.likes}</p>\n                    </li>\n                    <li class=image-info-item>\n                        <p class=\"info-title info-text\">Views</p>\n                        <p class=\"info-text\">${image.views}</p>\n                    </li>\n                    <li class=image-info-item>\n                        <p class=\"info-title info-text\">Comments</p>\n                        <p class=\"info-text\">${image.comments}</p>\n                    </li>\n                    <li class=image-info-item>\n                        <p class=\"info-title info-text\">Downloads</p>\n                        <p class=\"info-text\">${image.downloads}</p>\n                    </li>\n                  </ul>\n                </a>\n              </li>`\n    )\n    .join('');\n\n  return markup;\n}\n\nexport function renderGallery(images, gallery) {\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup(images));\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport '@fortawesome/fontawesome-free/css/all.min.css';\n\nimport { getImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n\nconst refs = {\n  searchForm: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n\nlet searchQuery;\nlet page = 1;\n\nrefs.searchForm.addEventListener('submit', submitFormHandler);\nrefs.loadMoreBtn.addEventListener('click', loadMoreHandler);\n\nasync function submitFormHandler(event) {\n  event.preventDefault();\n\n  refs.gallery.innerHTML = '';\n  page = 1;\n\n  searchQuery = event.target.elements.searchQuery.value.trim();\n\n  if (searchQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Your query can not be empty!',\n      backgroundColor: '#ef4040',\n      titleColor: '#fff',\n      messageColor: '#fff',\n      titleSize: '16px',\n      titleLineHeight: '1.5',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      icon: 'fa fa-exclamation-circle',\n      iconColor: '#fff',\n      position: 'topRight',\n    });\n\n    return;\n  } else {\n    try {\n      showLoader();\n      const images = await getImages(searchQuery, page);\n      if (images.hits.length === 0) {\n        hideLoader();\n        iziToast.info({\n          title: 'Info',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#ef4040',\n          maxWidth: 500,\n          titleColor: '#fff',\n          messageColor: '#fff',\n          titleSize: '16px',\n          titleLineHeight: '1.5',\n          messageSize: '16px',\n          messageLineHeight: '1.5',\n          icon: 'fa fa-exclamation-circle',\n          iconColor: '#fff',\n          position: 'topRight',\n        });\n\n        return;\n      } else {\n        page += 1;\n        renderGallery(images.hits, refs.gallery);\n        checkLoadMoreBtnStatus(images.total);\n      }\n      hideLoader();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  event.target.reset();\n}\n\nasync function loadMoreHandler() {\n  try {\n    showLoader();\n    const images = await getImages(searchQuery, page);\n    page += 1;\n\n    checkLoadMoreBtnStatus(images.total);\n    renderGallery(images.hits, refs.gallery);\n    hideLoader();\n    scrollPage();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('visually-hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add('visually-hidden');\n}\n\nfunction checkLoadMoreBtnStatus(total) {\n  const perPage = 40;\n  const totalPages = Math.ceil(total / perPage);\n\n  if (totalPages < page) {\n    hideLoadMoreBtn();\n    iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: '#b0e7f7',\n      maxWidth: 500,\n      titleColor: '#fff',\n      messageColor: '#fff',\n      titleSize: '16px',\n      titleLineHeight: '1.5',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      icon: 'fa fa-exclamation-circle',\n      iconColor: '#fff',\n      position: 'topRight',\n    });\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction showLoader() {\n  refs.loader.classList.remove('visually-hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('visually-hidden');\n}\n\nfunction scrollPage() {\n  const scrollHeight =\n    refs.gallery.children[0].getBoundingClientRect().height * 2;\n  scrollBy({\n    behavior: 'smooth',\n    top: scrollHeight,\n  });\n}\n"],"names":["myApiKey","axiosInstance","axios","getImages","searchQuery","page","params","lightbox","SimpleLightbox","galleryMarkup","images","image","value","index","self","renderGallery","gallery","refs","submitFormHandler","loadMoreHandler","event","iziToast","showLoader","hideLoader","checkLoadMoreBtnStatus","error","scrollPage","showLoadMoreBtn","hideLoadMoreBtn","total","scrollHeight"],"mappings":"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"}